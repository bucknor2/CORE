[
["index.html", "Current Polygenic Scores Fail to Capture Resilience Chapter 1 HRS Data Wrangling 1.1 Attaching Data 1.2 Organizing &amp; Restructuring 1.3 Filter, Subset, and Organize", " Current Polygenic Scores Fail to Capture Resilience Brianna Bucknor 2020-10-05 Chapter 1 HRS Data Wrangling 1.1 Attaching Data #install.packages(&quot;bookdown&quot;) library(haven) HRSdataDir &lt;- &quot;C:/Users/Bri/Documents/grad-repo/grad-repo/SRP/&quot; load(paste0(HRSdataDir,&quot;PGENSCORE3A_R.RData&quot;)) #AA PGS load(paste0(HRSdataDir, &quot;PGENSCORE3E_R.RData&quot;)) #European PGS load(paste0(HRSdataDir, &quot;TRK2016TR_R.RData&quot;)) #tracker file load(paste0(HRSdataDir, &quot;H10PR.RData&quot;)) #2010 CORE preload questions load(paste0(HRSdataDir, &quot;H10LB.RData&quot;)) #2010 CORE leave behind questionaire load(paste0(HRSdataDir, &quot;H12PR.RData&quot;)) #2012 CORE preload questions load(paste0(HRSdataDir, &quot;H12LB.RData&quot;)) #2012 CORE leave behind questionaire 1.2 Organizing &amp; Restructuring #ADD GROUP VARIABLE TO PGEN EA AND AA FILES PGENSCORE3A_R$group = rep(&quot;AA&quot;,nrow(PGENSCORE3A_R)) PGENSCORE3E_R$group = rep(&quot;EA&quot;,nrow(PGENSCORE3E_R)) #MAKE SINGLE VARIABLE ID: CONCATENATE(HHID,PN) PGENSCORE3A_R$HHID_PN = paste0(PGENSCORE3A_R$HHID,PGENSCORE3A_R$PN) PGENSCORE3E_R$HHID_PN = paste0(PGENSCORE3E_R$HHID,PGENSCORE3E_R$PN) TRK2016TR_R$HHID_PN = paste0(TRK2016TR_R$HHID,TRK2016TR_R$PN) MAKE CONSISTENT COLNAMES IN EA AND AA FILES # Note: edited these manually in text editor (separately AA &amp; EA just in case variables in different order) colnames(PGENSCORE3A_R) = c(&quot;HHID&quot;, &quot;PN&quot;, &quot;PC1_5A&quot;, &quot;PC1_5B&quot;, &quot;PC1_5C&quot;, &quot;PC1_5D&quot;, &quot;PC1_5E&quot;, &quot;PC6_10A&quot;, &quot;PC6_10B&quot;, &quot;PC6_10C&quot;, &quot;PC6_10D&quot;, &quot;PC6_10E&quot;, &quot;PGS3_GENCOG_CHRG15&quot;, &quot;PGS3_BMI_GIANT15&quot;, &quot;PGS3_HEIGHT_GIANT14&quot;, &quot;PGS3_SCZ_PGC14&quot;, &quot;PGS3_EDU2_SSGAC16&quot;, &quot;PGS3_EVRSMK_TAG10&quot;, &quot;PGS3_AD_IGAP13&quot;, &quot;PGS3_AD2_IGAP13&quot;, &quot;PGS3_WC_GIANT15&quot;, &quot;PGS3_WHR_GIANT15&quot;, &quot;PGS3_NEURO_SSGAC16&quot;, &quot;PGS3_WELLB_SSGAC16&quot;, &quot;PGS3_DPSYMP_SSGAC16&quot;, &quot;PGS3_CAD_CARDIOGR11&quot;, &quot;PGS3_MI_CARDIOGR15&quot;, &quot;PGS3_CRTSL_CORNET14&quot;, &quot;PGS3_T2D_DIAGRAM12&quot;, &quot;PGS3_BIP_PGC11&quot;, &quot;PGS3_ADHD_PGC17&quot;, &quot;PGS3_ADHD_PGC10&quot;, &quot;PGS3_XDISORDERPGC13&quot;, &quot;PGS3_MENARCHE_RPG14&quot;, &quot;PGS3_MENOPAUS_RPG15&quot;, &quot;PGS3_MDD_PGC13&quot;, &quot;PGS3_CPD_TAG10&quot;, &quot;PGS3_EXTRAV_GPC17&quot;, &quot;PGS3_AUTISM_PGC17&quot;, &quot;PGS3_LNGVTY_CHARG15&quot;, &quot;PGS3_AB_BROAD17&quot;, &quot;PGS3_EDU3_SSGAC18&quot;, &quot;PGS3_OCD_IOCDF17&quot;, &quot;PGS3_AFBC_SOCGEN16&quot;, &quot;PGS3_AFBF_SOCGEN16&quot;, &quot;PGS3_AFBM_SOCGEN16&quot;, &quot;PGS3_NEBC_SOCGEN16&quot;, &quot;PGS3_NEBF_SOCGEN16&quot;, &quot;PGS3_NEBM_SOCGEN16&quot;, &quot;PGS3_MDD2_PGC18&quot;, &quot;PGS3_PTSDAA_PGC18&quot;, &quot;PGS3_PTSDEA_PGC18&quot;, &quot;PGS3_PTSDC_PGC18&quot;, &quot;PGS3_HDL_GLGC13&quot;, &quot;PGS3_LDL_GLGC13&quot;, &quot;PGS3_TC_GLGC13&quot;, &quot;PGS3_ANXFS_ANGST16&quot;, &quot;PGS3_ANXCC_ANGST16&quot;, &quot;VERSION&quot;, &quot;group&quot;, &quot;HHID_PN&quot;) colnames(PGENSCORE3E_R) = c(&quot;HHID&quot;, &quot;PN&quot;, &quot;PC1_5A&quot;, &quot;PC1_5B&quot;, &quot;PC1_5C&quot;, &quot;PC1_5D&quot;, &quot;PC1_5E&quot;, &quot;PC6_10A&quot;, &quot;PC6_10B&quot;, &quot;PC6_10C&quot;, &quot;PC6_10D&quot;, &quot;PC6_10E&quot;, &quot;PGS3_GENCOG_CHRG15&quot;, &quot;PGS3_BMI_GIANT15&quot;, &quot;PGS3_HEIGHT_GIANT14&quot;, &quot;PGS3_SCZ_PGC14&quot;, &quot;PGS3_EDU2_SSGAC16&quot;, &quot;PGS3_EVRSMK_TAG10&quot;, &quot;PGS3_AD_IGAP13&quot;, &quot;PGS3_AD2_IGAP13&quot;, &quot;PGS3_WC_GIANT15&quot;, &quot;PGS3_WHR_GIANT15&quot;, &quot;PGS3_NEURO_SSGAC16&quot;, &quot;PGS3_WELLB_SSGAC16&quot;, &quot;PGS3_DPSYMP_SSGAC16&quot;, &quot;PGS3_CAD_CARDIOGR11&quot;, &quot;PGS3_MI_CARDIOGR15&quot;, &quot;PGS3_CRTSL_CORNET14&quot;, &quot;PGS3_T2D_DIAGRAM12&quot;, &quot;PGS3_BIP_PGC11&quot;, &quot;PGS3_ADHD_PGC17&quot;, &quot;PGS3_ADHD_PGC10&quot;, &quot;PGS3_XDISORDERPGC13&quot;, &quot;PGS3_MENARCHE_RPG14&quot;, &quot;PGS3_MENOPAUS_RPG15&quot;, &quot;PGS3_MDD_PGC13&quot;, &quot;PGS3_CPD_TAG10&quot;, &quot;PGS3_EXTRAV_GPC17&quot;, &quot;PGS3_AUTISM_PGC17&quot;, &quot;PGS3_LNGVTY_CHARG15&quot;, &quot;PGS3_AB_BROAD17&quot;, &quot;PGS3_EDU3_SSGAC18&quot;, &quot;PGS3_OCD_IOCDF17&quot;, &quot;PGS3_AFBC_SOCGEN16&quot;, &quot;PGS3_AFBF_SOCGEN16&quot;, &quot;PGS3_AFBM_SOCGEN16&quot;, &quot;PGS3_NEBC_SOCGEN16&quot;, &quot;PGS3_NEBF_SOCGEN16&quot;, &quot;PGS3_NEBM_SOCGEN16&quot;, &quot;PGS3_MDD2_PGC18&quot;, &quot;PGS3_PTSDAA_PGC18&quot;, &quot;PGS3_PTSDEA_PGC18&quot;, &quot;PGS3_PTSDC_PGC18&quot;, &quot;PGS3_HDL_GLGC13&quot;, &quot;PGS3_LDL_GLGC13&quot;, &quot;PGS3_TC_GLGC13&quot;, &quot;PGS3_ANXFS_ANGST16&quot;, &quot;PGS3_ANXCC_ANGST16&quot;, &quot;VERSION&quot;, &quot;group&quot;, &quot;HHID_PN&quot;) Merge AA &amp; EA PGS Files (pre-merge: AA N = 3100, EA N = 12090) PGENSCORE3 = merge(PGENSCORE3A_R,PGENSCORE3E_R, all=T) Post-merge: PGS N = 15190 Merge PGS with tracker file #All participants, even those without genotypes PGENSCORE3_TRK2016TR_ALL = merge(TRK2016TR_R,PGENSCORE3,all=T) #Only participants with genotypes PGENSCORE3_TRK2016TR_ONLY_PGS = merge(TRK2016TR_R,PGENSCORE3) Remember to split analyses by group (AA or EA) 1.3 Filter, Subset, and Organize Filtering for participants birth year, gender, race, and Enhanced Face-to-Face Interview (EFTF) assignment--which is when bio data was collected. LBY = Leave behind questionnaire library(dplyr) SRP_DATASET = dplyr::select(PGENSCORE3_TRK2016TR_ONLY_PGS, HHID, PN, HHID_PN, BIRTHYR, GENDER, RACE, EFTFASSIGN) SRP_DATASET$LBY = paste0(SRP_DATASET$HHID_PN,SRP_DATASET$EFTFASSIGN) 2010 data. H10LB_1 = as.data.frame(H10LB) H10LB_1$EFTFASSIGN =(rep(1,nrow(H10LB_1))) H10LB_1$HHID_PN = paste0(H10LB_1$HHID,H10LB_1$PN) H10LB_1$LBY = paste0(H10LB_1$HHID_PN, H10LB_1$EFTFASSIGN) 2012 data. H12LB_1 = as.data.frame(H12LB) H12LB_1$EFTFASSIGN = (rep(2,nrow(H12LB_1))) H12LB_1$HHID_PN = paste0(H12LB_1$HHID,H12LB_1$PN) H12LB_1$LBY = paste0(H12LB_1$HHID_PN, H12LB_1$EFTFASSIGN) Clean up: renaming columns names(H10LB_1) = substring(names(H10LB_1),2) colnames(H10LB_1)[1] &lt;- &quot;HHID&quot; colnames(H10LB_1)[2] &lt;- &quot;PN&quot; colnames(H10LB_1)[403] &lt;- &quot;HHID_PN&quot; colnames(H10LB_1)[404] &lt;- &quot;LBY&quot; H10LB_1 = H10LB_1[-c(402)] Selecting relevant columns. H10LB_1 = H10LB_1[-c(222:245,348:365,372:398)] H12LB_1 = H12LB_1[-c(241:243,327:334,341:346,348:483)] Filtering out those that did not complete the LB Questionnaire. 1-4 = completed by mail, with interview, other. 5 = not completed H12LB_1 = filter(H12LB_1, LBCOMP&lt;5) H10LB_1 = filter(H10LB_1, LBCOMP&lt;5) Adding year column to make it easier to calculate age and still have a record of the correct year after binding the rows. H10LB_1$YEAR = (rep(2010,nrow(H10LB_1))) H12LB_1$YEAR = (rep(2012,nrow(H12LB_1))) HLB = bind_rows(H10LB_1,H12LB_1) Joining PGS data with questionnaire data SRP_DATASET_FINAL = left_join(SRP_DATASET,HLB, by=&quot;LBY&quot;) restructuring to get education variable. SRP_DATASET_FINAL = filter(SRP_DATASET_FINAL, LBCOMP&lt;5) EDU = dplyr::select(PGENSCORE3_TRK2016TR_ONLY_PGS,HHID_PN,DEGREE) Selecting education level variable ID = dplyr::select(SRP_DATASET_FINAL, HHID_PN.x) colnames(ID) = c(&quot;HHID_PN&quot;) EDU = inner_join(EDU,ID,by=&quot;HHID_PN&quot;) EDU = dplyr:: select(EDU,-HHID_PN) Completed dataset.Finished wrangling. _A = analysis SRP_DATASET_PGS_A = inner_join(PGENSCORE3,ID, by = &quot;HHID_PN&quot;) "]
]
